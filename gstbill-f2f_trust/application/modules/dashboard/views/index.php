<?php $theme_path = $this->config->item('theme_locations') . 'esms'; ?><script src="https://www.google.com/jsapi" type="text/javascript"></script><!--begin:: Widgets/Stats--><style>    .kt-widget24 .kt-widget24__details .kt-widget24__stats{text-align: center;                                                           margin: 0 auto;}    .kt-widget24{text-align: center;}    .kt-widget24__title{font-size:1.2rem;}</style><div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid" id="dashboard_div" ng-app="dashboard_app" ng-controller="dashboard_controller" ng-init="loadPage()" ng-cloak>    <div class="kt-portlet dash_board">        <div class="kt-portlet__body  kt-portlet__body--fit">            <div class="row row-no-padding row-col-separator-lg">                <div class="col-md-2 col-lg-2 col-xl-2 kt-iconbox--info kt-iconbox--animate-fast">                    <!--begin::Total Profit-->                    <div class="kt-widget24">                        <div class="">                            <div class="kt-widget24__info">                                <h4 class="kt-widget24__title">                                    Total Scholarships                                </h4>                            </div>                            <div class="kt-widget24__details">                                <span class="kt-widget24__stats kt-font-brand">                                    {{scholarshipsCount}}                                </span>                            </div>                        </div>                        <!--<div class="progress progress--sm">                            <div class="progress-bar kt-bg-brand" role="progressbar" style="width: 78%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>                        </div>                        <div class="kt-widget24__action">                            <span class="kt-widget24__change">                                Change                            </span>                            <span class="kt-widget24__number">                                78%                            </span>                        </div>-->                    </div>                    <!--end::Total Profit-->                </div>                <div class="col-md-2 col-lg-2 col-xl-2  kt-iconbox--warning kt-iconbox--animate-fast">                    <!--begin::New Feedbacks-->                    <div class="kt-widget24">                        <div class="">                            <div class="kt-widget24__info">                                <h4 class="kt-widget24__title">                                    Total Sponsors                                </h4>                            </div>                            <div class="kt-widget24__details">                                <span class="kt-widget24__stats kt-font-warning">                                    {{sponsorsCount}}                                </span>                            </div>                        </div>                        <!--<div class="progress progress--sm">                            <div class="progress-bar kt-bg-warning" role="progressbar" style="width: 84%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>                        </div>                        <div class="kt-widget24__action">                            <span class="kt-widget24__change">                                Change                            </span>                            <span class="kt-widget24__number">                                84%                            </span>                        </div>-->                    </div>                    <!--end::New Feedbacks-->                </div>                <div class="col-md-2 col-lg-2 col-xl-2 kt-iconbox--info kt-iconbox--animate-fast">                    <!--begin::New Users-->                    <div class="kt-widget24">                        <div class="">                            <div class="kt-widget24__info">                                <h4 class="kt-widget24__title">                                    Closing Petty Cash                                </h4>                            </div>                            <div class="kt-widget24__details">                                <span class="kt-widget24__stats kt-font-info">                                    &#8377; {{closingPettyCash}}                                </span>                            </div>                        </div>                        <!--<div class="progress progress--sm">                            <div class="progress-bar kt-bg-success" role="progressbar" style="width: 90%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>                        </div>                        <div class="kt-widget24__action">                            <span class="kt-widget24__change">                                Change                            </span>                            <span class="kt-widget24__number">                                90%                            </span>                        </div>-->                    </div>                    <!--end::New Users-->                </div>                <div class="col-md-3 col-lg-3 col-xl-3 kt-iconbox--danger kt-iconbox--animate-fast">                    <!--begin::New Orders-->                    <div class="kt-widget24 ">                        <div class="">                            <div class="kt-widget24__info">                                <h4 class="kt-widget24__title">                                    Organization Amount                                </h4>                            </div>                            <div class="kt-widget24__details">                                <span class="kt-widget24__stats kt-font-danger">                                    &#8377; {{organizationAmount}}                                </span>                            </div>                        </div>                        <!--<div class="progress progress--sm">                            <div class="progress-bar kt-bg-danger" role="progressbar" style="width: 69%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>                        </div>                        <div class="kt-widget24__action">                            <span class="kt-widget24__change">                                Change                            </span>                            <span class="kt-widget24__number">                                69%                            </span>                        </div>-->                    </div>                    <!--end::New Orders-->                </div>                <div class="col-md-3 col-lg-3 col-xl-3 kt-iconbox--primary kt-iconbox--animate-fast">                    <!--begin::New Users-->                    <div class="kt-widget24">                        <div class="">                            <div class="kt-widget24__info">                                <h4 class="kt-widget24__title">                                    Zakaath Amount                                </h4>                            </div>                            <div class="kt-widget24__details">                                <span class="kt-widget24__stats kt-font-primary">                                    &#8377; {{zakaathAmount}}                                </span>                            </div>                        </div>                        <!--<div class="progress progress--sm">                            <div class="progress-bar kt-bg-success" role="progressbar" style="width: 90%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>                        </div>                        <div class="kt-widget24__action">                            <span class="kt-widget24__change">                                Change                            </span>                            <span class="kt-widget24__number">                                90%                            </span>                        </div>-->                    </div>                    <!--end::New Users-->                </div>            </div>        </div>    </div>    <!--end:: Widgets/Stats-->    <!--Begin::Row-->    <div class="row">        <div class="col-lg-6">            <!--begin::Portlet-->            <div class="kt-portlet kt-portlet--tab">                <div class="kt-portlet__head">                    <div class="kt-portlet__head-label">                        <span class="kt-portlet__head-icon kt-hidden">                            <i class="la la-gear"></i>                        </span>                        <h3 class="kt-portlet__head-title">                            Sponsored Amount by Year-wise                        </h3>                    </div>                </div>                <div class="kt-portlet__body">                    <div id="kt_gchart_1" style="height:500px;"></div>                </div>            </div>            <!--end::Portlet-->        </div>        <div class="col-lg-6">            <!--begin::Portlet-->            <div class="kt-portlet kt-portlet--tab">                <div class="kt-portlet__head">                    <div class="kt-portlet__head-label">                        <span class="kt-portlet__head-icon kt-hidden">                            <i class="la la-gear"></i>                        </span>                        <h3 class="kt-portlet__head-title">                            Scholarships Issued by Year-wise                        </h3>                    </div>                </div>                <div class="kt-portlet__body">                    <div id="kt_gchart_2" style="height:500px;"></div>                </div>            </div>            <!--end::Portlet-->        </div>    </div>    <div class="row">        <div class="col-lg-12">            <!--begin::Portlet-->            <div class="kt-portlet kt-portlet--tab">                <div class="kt-portlet__head">                    <div class="kt-portlet__head-label">                        <span class="kt-portlet__head-icon kt-hidden">                            <i class="la la-gear"></i>                        </span>                        <h3 class="kt-portlet__head-title">                            Subscription Amount by Year-wise                        </h3>                    </div>                </div>                <div class="kt-portlet__body">                    <div id="kt_gchart_3" style="height:500px;"></div>                </div>            </div>            <!--end::Portlet-->        </div>        <!--<div class="col-lg-6">            <div class="kt-portlet kt-portlet--tab">                <div class="kt-portlet__head">                    <div class="kt-portlet__head-label">                        <span class="kt-portlet__head-icon kt-hidden">                            <i class="la la-gear"></i>                        </span>                        <h3 class="kt-portlet__head-title">                            Scholarships Issued by Year-wise                        </h3>                    </div>                </div>                <div class="kt-portlet__body">                    <div id="kt_gchart_4" style="height:500px;"></div>                </div>            </div>        </div>-->    </div>    <!--begin::Portlet-->    <!--<div class="kt-portlet">        <div class="kt-portlet__head">            <div class="kt-portlet__head-label">                <span class="kt-portlet__head-icon kt-hidden">                    <i class="la la-gear"></i>                </span>                <h3 class="kt-portlet__head-title">                    Animated Time-Line Pie Chart                </h3>            </div>        </div>        <div class="kt-portlet__body">            <div id="kt_amcharts_13" style="height: 500px;"></div>        </div>    </div>-->    <!--end::Portlet--></div><script>    var dashboard_app = angular.module('dashboard_app', []);    dashboard_app.controller('dashboard_controller', ['$scope', '$http', '$compile', '$location', '$window', '$sce', function ($scope, $http, $compile, $location, $window, $sce) {            $scope.thisMember = $("#this_member_id").val();            $scope.loadPage = function () {                $http.get(base_url + 'users/getPermissions')                        .success(function (response) {                            //console.log(response);                            var modules_permission = response.modules;                            $scope.isVisible = "false";                            if (modules_permission['dashboard']) {                                if (modules_permission['dashboard']['dashboard']) {                                } else {                                    $window.location.href = base_url + "users/my_profile";                                }                            } else {                                $window.location.href = base_url + "users/my_profile";                            }                        })                $scope.loadScholarshipCount();                $scope.loadSponsorsCount();                $scope.loadOrganizationAmount();                $scope.loadZakaathAmount();                $scope.loadPettyCash();            };            $scope.loadScholarshipCount = function () {                $http.get(base_url + 'dashboard/get_scholarship_count/')                        .success(function (data) {                            //console.log(data);                            //return;                            $scope.scholarshipsCount = data.scholarship_count[0]['scholarship_count'];                        })            }            $scope.loadSponsorsCount = function () {                $http.get(base_url + 'dashboard/get_sponsor_count/')                        .success(function (data) {                            //console.log(data);                            //return;                            $scope.sponsorsCount = data.sponsor_count[0]['sponsor_count'];                        })            }            $scope.loadOrganizationAmount = function () {                $http.get(base_url + 'dashboard/get_organization_amount/')                        .success(function (data) {                            //console.log(data);                            //return;                            $scope.organizationAmount = data.organization_amount[0]['amount'];                        })            }            $scope.loadZakaathAmount = function () {                $http.get(base_url + 'dashboard/get_zakaath_amount/')                        .success(function (data) {                            //console.log(data);                            //return;                            $scope.zakaathAmount = data.zakaath_amount[0]['amount'];                        })            }            $scope.loadPettyCash = function () {                $http.get(base_url + 'dashboard/get_petty_cash_amount/')                        .success(function (data) {                            //console.log(data);                            //return;                            $scope.closingPettyCash = data.closing_balance;                        })            }        }]);    var dashboard_div = document.getElementById('dashboard_div');    //alert(dvSecond);    angular.element(document).ready(function () {        angular.bootstrap(dashboard_div, ['dashboard_app']);    });    var KTGoogleChartsDemo = function () {        // Private functions        var main = function () {            // GOOGLE CHARTS INIT            google.load('visualization', '1', {                packages: ['corechart', 'bar', 'line']            });            google.setOnLoadCallback(function () {                KTGoogleChartsDemo.runDemos();            });        }        var sponsorAmountCharts = function () {            $.ajax({                method: "POST",                url: base_url + "dashboard/get_sponsor_by_year_wise",                data: "",                error: function (data) {                    console.log(data);                },                success: function (response) {                    //console.log(data);                    // COLUMN CHART                    var data = new google.visualization.DataTable();                    data.addColumn('string', 'Year');                    data.addColumn('number', 'Total Amount Sponsored ');                    var jsonData = JSON.parse(response);                    for (var i = 0; i < jsonData.length; i++) {                        //console.log(jsonData[i]);                        data.addRow([$.trim(jsonData[i].year), parseFloat($.trim(jsonData[i].sponsor_amount))]);                    }//                    data.addRows([//                        ['2020', 15000],//                        ['2019', 14000],//                        ['2018', 13000],//                        ['2017', 20000],//                        ['2016', 25000],//                        ['2015', 10000],//                        ['2014', 8000],//                        ['2013', 2000],//                        ['2012', 22000],//                        ['2011', 14000],//                    ]);                    var options = {                        title: 'Total Amount Sponsored by Year-wise',                        focusTarget: 'category',                        hAxis: {                            title: 'Year',                            format: 'number',                            viewWindow: {                                min: [7, 30, 0],                                max: [17, 30, 0]                            },                        },                        vAxis: {                            title: 'Sponsored Amount'                        },                        colors: ['#6e4ff5']                    };                    var chart = new google.visualization.ColumnChart(document.getElementById('kt_gchart_1'));                    chart.draw(data, options);                    //var chart = new google.visualization.ColumnChart(document.getElementById('kt_gchart_2'));                    // chart.draw(data, options);                }            });        }        var demoPieCharts = function () {            var data = google.visualization.arrayToDataTable([                ['Task', 'Hours per Day'],                ['Work', 11],                ['Eat', 2],                ['Commute', 2],                ['Watch TV', 2],                ['Sleep', 7]            ]);            var options = {                title: 'My Daily Activities',                colors: ['#fe3995', '#f6aa33', '#6e4ff5', '#2abe81', '#c7d2e7', '#593ae1']            };            var chart = new google.visualization.PieChart(document.getElementById('kt_gchart_3'));            chart.draw(data, options);            var options = {                pieHole: 0.4,                colors: ['#fe3995', '#f6aa33', '#6e4ff5', '#2abe81', '#c7d2e7', '#593ae1']            };            var chart = new google.visualization.PieChart(document.getElementById('kt_gchart_4'));            chart.draw(data, options);        }        var scholarshipCountCharts = function () {            $.ajax({                method: "POST",                url: base_url + "dashboard/get_scholarships_by_year_wise",                data: "",                error: function (data) {                    console.log(data);                },                success: function (response) {                    //console.log(response);                    //return;                    var data = new google.visualization.DataTable();                    data.addColumn('string', 'Year');                    data.addColumn('number', 'Number of Free Scholarships');                    data.addColumn('number', 'Number of Loan Scholarships');                    var jsonData = JSON.parse(response);                    for (var i = 0; i < jsonData.length; i++) {                        //console.log(jsonData[i]);                        data.addRow([$.trim(jsonData[i].year), parseInt($.trim(jsonData[i].free_scholarsip_count)), parseInt($.trim(jsonData[i].loan_scholarship_count))]);                    }//                    data.addRows([//                        ['2020', 15, 20],//                        ['2019', 14, 10],//                        ['2018', 13, 25],//                        ['2017', 20, 40],//                        ['2016', 25, 10],//                        ['2015', 10, 2],//                        ['2014', 80, 5],//                        ['2013', 20, 14],//                        ['2012', 22, 16],//                        ['2011', 14, 25],//                    ]);                    var options = {                        title: 'Total no. of Scholarships by Year-wise',                        focusTarget: 'category',                        hAxis: {                            title: 'Year',                            format: 'number',                            viewWindow: {                                min: [7, 30, 0],                                max: [17, 30, 0]                            },                        },                        vAxis: {                            title: 'Scholarships Issued'                        },                        colors: ['#6e4ff5', '#fe3995']                    };                    var chart = new google.visualization.ColumnChart(document.getElementById('kt_gchart_2'));                    chart.draw(data, options);                }            });        }        var subscriptionsCharts = function () {            $.ajax({                method: "POST",                url: base_url + "dashboard/get_subscription_by_year_wise",                data: "",                error: function (data) {                    console.log(data);                },                success: function (response) {                    console.log(response);                    //return;                    var data = new google.visualization.DataTable();                    data.addColumn('string', 'Year');                    data.addColumn('number', 'Subscription Amount');                    var jsonData = JSON.parse(response);                    for (var i = 0; i < jsonData.length; i++) {                        //console.log(jsonData[i]);                        data.addRow([$.trim(jsonData[i].year), parseInt($.trim(jsonData[i].subscription_amount))]);                    }//                    data.addRows([//                        [1, 37.8],//                        [2, 30.9],//                        [3, 25.4],//                        [4, 11.7],//                        [5, 11.9],//                        [6, 8.8],//                        [7, 7.6],//                        [8, 12.3],//                        [9, 16.9],//                        [10, 12.8],//                        [11, 5.3],//                        [12, 6.6],//                        [13, 4.8],//                        [14, 4.2]//                    ]);                    var options = {                        chart: {                            title: 'Subscription Report',                            subtitle: 'Suscription Amount by Year-wise'                        },                        colors: ['#6e4ff5', '#f6aa33', '#fe3995']                    };                    var chart = new google.charts.Line(document.getElementById('kt_gchart_3'));                    chart.draw(data, options);                }            });        }        return {            // public functions            init: function () {                main();            },            runDemos: function () {                sponsorAmountCharts();                scholarshipCountCharts();                subscriptionsCharts();            }        };    }();    KTGoogleChartsDemo.init();</script>