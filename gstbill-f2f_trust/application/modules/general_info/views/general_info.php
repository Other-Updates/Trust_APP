<style>    table tr td:nth-child(6){text-align:center;}    table tr td:nth-child(7){text-align:center;}    table tr td:nth-child(8){text-align:center;}    table tr td:nth-child(9){text-align:center;}    table tr th:nth-child(1) span{width:50px !important;}    table tr th:nth-child(6) span{width:120px !important;}    table tr th:nth-child(7) span{width:200px !important;}    table tr th:nth-child(8) span{width:70px !important;}    table tr th:nth-child(9) span{width:70px !important;}    table tr th:nth-child(10) span{width:90px !important;}    table tr th:nth-child(5) span{width:80px !important;}    .kt-portlet .kt-portlet__head{padding: 0 9px;}    .kt-widget12 .kt-widget12__content .kt-widget12__item{margin-bottom: .5rem;}    .btn i{padding-right: 0rem;}    .zakaath_amount-error, .organization_amount-error{position:absolute; margin-top:3rem; font-size: 11px;}    .kt-subheader__toolbar button {padding: 0.5rem .5rem !important;}    .btn [class^="fa-"], .btn [class*=" fa-"] {        font-size: 1rem;    }</style><div class="kt-content  kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor"  id="general_info_div" ng-app="general_info_app" ng-controller="general_info_controller" ng-init="loadGeneralInfoPage()" ng-cloak>    <!-- begin:: Content -->    <div class="row kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid" >        <div class="col-xl-6 col-lg-6 order-lg-1 order-xl-1">            <!--begin:: Widgets/Finance Summary-->            <div class="kt-portlet kt-portlet--height-fluid">                <div class="kt-portlet__head">                    <div class="kt-portlet__head-label">                        <h3 class="kt-portlet__head-title">                            Zakaath Amount Details                        </h3>                    </div>                </div>                <div class="kt-portlet__body">                    <form method="POST">                        <div class="kt-widget12">                            <div class="kt-widget12__content">                                <div class="kt-widget12__item">                                    <div class="kt-widget12__info">                                        <!--<span class="kt-widget12__desc">Zakaath Amount</span>-->                                        <span class="kt-widget12__value"> &#8377; {{zakaathAmount}}</span>                                    </div>                                    <div class="kt-widget12__info">                                        <div class="kt-subheader__toolbar" id="add_btn_div" >                                            <button type="button" class="btn btn-brand btn-icon-sm" ng-click="toggleZakaathAmt = !toggleZakaathAmt">                                                <i class="flaticon-edit"></i>                                            </button>                                        </div>                                    </div>                                </div>                                <div class="kt-widget12__item" >                                    <div class="kt-widget12__info">                                        <span class="kt-widget12__desc">Last updated - {{lastUpdateZakaathAmt| convertDate}}</span>                                        <!--<span class="kt-widget12__value">{{lastUpdateZakaathAmt| convertDate}}</span>-->                                    </div>                                </div>                                <div class="kt-widget12__item" ng-if="toggleZakaathAmt">                                    <div class="kt-widget12__info">                                        <div class="col-md-12 row">                                            <input type="text" class="form-control validate_amount" aria-describedby="emailHelp" name="zakaath_amount" id="zakaath_amount" placeholder="Enter Amount" ng-model="updateZakaathAmt">                                            <span class="form-text text-muted zakaath_amount-error error-span"></span>                                        </div>                                    </div>                                    <div class="kt-widget12__info">                                        <div class="kt-subheader__toolbar" id="add_btn_div" >                                            <button type="button" class="btn btn-success btn-icon-sm" ng-click='addZakaathAmt()'>                                                <i class="fa fa-plus"></i> Add                                            </button>                                            <button type="button" class="btn btn-primary btn-icon-sm" ng-click='subtractZakaathAmt()'>                                                <i class="fa fa-minus"></i> Subtract                                            </button>                                        </div>                                    </div>                                </div>                            </div>                        </div>                    </form>                </div>            </div>            <!--end:: Widgets/Finance Summary-->        </div>        <div class="col-xl-6 col-lg-6 order-lg-1 order-xl-1">            <!--begin:: Widgets/Finance Summary-->            <div class="kt-portlet kt-portlet--height-fluid">                <div class="kt-portlet__head">                    <div class="kt-portlet__head-label">                        <h3 class="kt-portlet__head-title">                            Organization Amount Details                        </h3>                    </div>                </div>                <div class="kt-portlet__body">                    <div class="kt-widget12">                        <div class="kt-widget12__content">                            <div class="kt-widget12__item">                                <div class="kt-widget12__info">                                    <!--<span class="kt-widget12__desc">Organization Amount</span>-->                                    <span class="kt-widget12__value"> &#8377; {{organizationAmount}}</span>                                </div>                                <div class="kt-widget12__info">                                    <div class="kt-subheader__toolbar" id="add_btn_div" >                                        <button type="button" class="btn btn-brand btn-icon-sm" ng-click="toggleOrgAmt = !toggleOrgAmt">                                            <i class="flaticon-edit"></i>                                        </button>                                    </div>                                </div>                            </div>                            <div class="kt-widget12__item">                                <div class="kt-widget12__info">                                    <span class="kt-widget12__desc">Last updated - {{lastUpdateOrgAmt| convertDate}}</span>                                    <!--<span class="kt-widget12__value">{{lastUpdateOrgAmt| convertDate}}</span>-->                                </div>                            </div>                            <div class="kt-widget12__item" ng-if="toggleOrgAmt">                                <div class="kt-widget12__info">                                    <div class="col-md-12 row">                                        <input type="text" class="form-control validate_amount" aria-describedby="emailHelp" name="organization_amount" id="organization_amount" placeholder="Enter Amount" ng-model="updateOrgAmt">                                        <span class="form-text text-muted organization_amount-error error-span"></span>                                    </div>                                </div>                                <div class="kt-widget12__info">                                    <div class="kt-subheader__toolbar" id="add_btn_div" >                                        <button type="button" class="btn btn-success btn-icon-sm" ng-click='addOrgAmt()'>                                            <i class="fa fa-plus"></i> Add                                        </button>                                        <button type="button" class="btn btn-primary btn-icon-sm" ng-click='subtractOrgAmt()'>                                            <i class="fa fa-minus"></i> Subtract                                        </button>                                    </div>                                </div>                            </div>                        </div>                    </div>                </div>            </div>            <!--end:: Widgets/Finance Summary-->        </div>    </div>    <!-- end:: Content --></div><script>    var general_info_app = angular.module('general_info_app', []);    general_info_app.controller('general_info_controller', ['$scope', '$http', '$compile', '$location', '$window', function ($scope, $http, $compile, $location, $window) {            $scope.loadGeneralInfoPage = function () {                $http.get(base_url + 'users/getPermissions')                        .success(function (response) {                            //console.log(response);                            var modules_permission = response.modules;                            $scope.isVisible = "false";                            if (modules_permission['general_info']) {                                if (modules_permission['general_info']['general_info']) {                                    if (modules_permission['general_info']['general_info']['add'] == "1") {                                        // alert("masters");                                        $scope.isVisible = "true";                                        // The == and != operators consider null equal to only null or undefined                                    }                                    if (modules_permission['general_info']['general_info']['edit'] == "1") {                                        // alert("masters");                                        $("#hasEdit").val("1");                                        // The == and != operators consider null equal to only null or undefined                                    }                                    if (modules_permission['general_info']['general_info']['delete'] == "1") {                                        // alert("masters");                                        $("#hasDelete").val("1");                                        // The == and != operators consider null equal to only null or undefined                                    }                                    $scope.loadData();                                    $scope.isVisibleZakaath = "false";                                    $scope.isVisibleOrg = "false";                                } else {                                    $window.location.href = base_url + "dashboard";                                }                            } else {                                $window.location.href = base_url + "dashboard";                            }                        })            };            $scope.addZakaathAmt = function () {                $(".zakaath_amount-error").html("");                //var amount = $scope.updateZakaathAmt;                var amount = $("#zakaath_amount").val();                if (parseFloat(amount) != 0 && amount != "") {                    swal.fire({                        title: "Are you sure?",                        text: "Do you want to add Zakaath amount?",                        type: "warning",                        showCancelButton: true,                        confirmButtonClass: "btn-danger",                        confirmButtonText: "Yes",                        closeOnConfirm: false                    }).then(function (result) {                        if (result.value) {                            var dataString = "amount=" + amount;                            $.ajax({                                url: base_url + 'general_info/add_zakaath_amount',                                method: "POST",                                data: dataString,                                success: function (data) {                                    // console.log(data);                                    if (data == "success") {                                        // var added_amount = parseFloat($scope.zakaathAmount) + parseFloat(amount);                                        $scope.loadData();                                        $scope.toggleZakaathAmt = "false";                                        //alert($scope.zakaathAmount);                                    }                                }                            });                        }                    });                } else {                    $(".zakaath_amount-error").html("Please Enter Valid Amount");                }            }            $scope.subtractZakaathAmt = function () {                $(".zakaath_amount-error").html("");                //var amount = $scope.updateZakaathAmt;                var amount = $("#zakaath_amount").val();                //alert(parseFloat($scope.zakaathAmount));                if (parseFloat($scope.zakaathAmount) < parseFloat(amount)) {                    $(".zakaath_amount-error").html("Amount exceeds &#8377; " + $scope.zakaathAmount);                } else if (parseFloat(amount) != 0 && amount != "") {                    swal.fire({                        title: "Are you sure?",                        text: "Do you want to subtract Zakaath amount?",                        type: "warning",                        showCancelButton: true,                        confirmButtonClass: "btn-danger",                        confirmButtonText: "Yes",                        closeOnConfirm: false                    }).then(function (result) {                        if (result.value) {                            var dataString = "amount=" + amount;                            $.ajax({                                url: base_url + 'general_info/subtract_zakaath_amount',                                method: "POST",                                data: dataString,                                success: function (data) {                                    // console.log(data);                                    if (data == "success") {                                        // var added_amount = parseFloat($scope.zakaathAmount) + parseFloat(amount);                                        $scope.loadData();                                        $scope.toggleZakaathAmt = "false";                                        //alert($scope.zakaathAmount);                                    }                                }                            });                        }                    });                } else {                    $(".zakaath_amount-error").html("Please Enter Valid Amount");                }            }            $scope.addOrgAmt = function () {                $(".organization_amount-error").html("");                //var amount = $scope.updateZakaathAmt;                var amount = $("#organization_amount").val();                if (parseFloat(amount) != 0 && amount != "") {                    swal.fire({                        title: "Are you sure?",                        text: "Do you want to add Organization amount?",                        type: "warning",                        showCancelButton: true,                        confirmButtonClass: "btn-danger",                        confirmButtonText: "Yes",                        closeOnConfirm: false                    }).then(function (result) {                        if (result.value) {                            var dataString = "amount=" + amount;                            $.ajax({                                url: base_url + 'general_info/add_organization_amount',                                method: "POST",                                data: dataString,                                success: function (data) {                                    // console.log(data);                                    if (data == "success") {                                        // var added_amount = parseFloat($scope.zakaathAmount) + parseFloat(amount);                                        $scope.loadData();                                        $scope.toggleOrgAmt = "false";                                        //alert($scope.zakaathAmount);                                    }                                }                            });                        }                    });                } else {                    $(".organization_amount-error").html("Please Enter Valid Amount");                }            }            $scope.subtractOrgAmt = function () {                $(".organization_amount-error").html("");                //var amount = $scope.updateZakaathAmt;                var amount = $("#organization_amount").val();                if (parseFloat($scope.organizationAmount) < parseFloat(amount)) {                    $(".organization_amount-error").html("Amount exceeds &#8377; " + $scope.organizationAmount);                } else if (parseFloat(amount) != 0 && amount != "") {                    swal.fire({                        title: "Are you sure?",                        text: "Do you want to subtract Organization amount?",                        type: "warning",                        showCancelButton: true,                        confirmButtonClass: "btn-danger",                        confirmButtonText: "Yes",                        closeOnConfirm: false                    }).then(function (result) {                        if (result.value) {                            var dataString = "amount=" + amount;                            $.ajax({                                url: base_url + 'general_info/subtract_organization_amount',                                method: "POST",                                data: dataString,                                success: function (data) {                                    // console.log(data);                                    if (data == "success") {                                        // var added_amount = parseFloat($scope.zakaathAmount) + parseFloat(amount);                                        $scope.loadData();                                        $scope.toggleOrgAmt = "false";                                        //alert($scope.zakaathAmount);                                    }                                }                            });                        }                    });                } else {                    $(".organization_amount-error").html("Please Enter Valid Amount");                }            }//            $scope.dateSearch = function () {////                membersDataTable.reload();//            }            //demo();            $scope.loadData = function () {                $http.get(base_url + 'general_info/getGeneralInfo')                        .success(function (response) {                            console.log(response);                            //alert(response['zakaath_amount']);                            if (response['zakaath_amount'] == null) {                                $scope.zakaathAmount = 0;                                $scope.lastUpdateZakaathAmt = null;                            } else {                                $scope.zakaathAmount = response['zakaath_amount'][0]['amount'];                                $scope.lastUpdateZakaathAmt = response['zakaath_amount'][0]['updated_date'];                            }                            if (response['organization_amount'] == null) {                                $scope.organizationAmount = 0;                                $scope.lastUpdateOrgAmt = null;                            } else {                                $scope.organizationAmount = response['organization_amount'][0]['amount'];                                $scope.lastUpdateOrgAmt = response['organization_amount'][0]['updated_date'];                            }                            //$('#submit_edit_members_form').attr("disabled", false);                        })            }        }]);    general_info_app.filter('convertDate', function () {        return function (dateString) {            // alert(dateString);            if (dateString != '0000-00-00 00:00:00' && dateString != null) {                var dateObject = new Date(dateString);                //console.log(dateObject);                var date_val = dateObject.getDate() + '/' + (parseInt(dateObject.getMonth()) + 1) + '/' + dateObject.getFullYear();                return date_val;            } else {                return "N/A";            }        };    });    var general_info_div = document.getElementById('general_info_div');    //alert(dvSecond);    angular.element(document).ready(function () {        angular.bootstrap(general_info_div, ['general_info_app']);    });    //$('.validate_amount').keypress(function (event) {    $(document).on('keypress', '.validate_amount', function () {        //console.log(event.which);        if (event.which != 8 && isNaN(String.fromCharCode(event.which))) {            event.preventDefault();        }    });</script>