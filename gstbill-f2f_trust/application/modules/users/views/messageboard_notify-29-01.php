<?php $theme_path = $this->config->item('theme_locations') . 'esms';?><?php$is_new_message = "0";$has_confirmation = 0;if (count($new_message['new_messages']) > 0) {    $is_new_message = "1";    $has_confirmation = $new_message['new_messages'][0]['has_confirmation'];}?><style>    .modal-title{text-align:center; margin:0 auto;}    .notify-message{box-shadow: 0px 0px 13px 0px rgb(206, 206, 206); width:100%; height:auto; background-color:white; padding:25px;}    .pin-img{width:15px;}    .pin-img-right{float:right;}    .modal-content{background-color: #fff; background-image: url(<?= $theme_path; ?>/assets/media/logos/popupbg3.png); max-width: 590px;}    .gif-img{width:100%; position:fixed; background-color:white; height:890px; padding-top:20%;}    .gif-img img{margin:0 auto; display:block; }    .gif-width{width:10%;}    .gif-width1{width:100%; position:absolute; height:456px; opacity:0.5;}    .modal-dialog{max-width: 590px;}    .modal-header, .modal-footer{position:relative; border-bottom:0px; border-top:0px; }</style><input type="hidden" id="is_new_message" value="<?php echo $is_new_message; ?>"><input type="hidden" id="has_confirmation" value="<?php echo $has_confirmation; ?>"><div class="modal fade" id="kt_modal_6" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">    <div class="modal-dialog modal-dialog-centered" role="document" style="display:none;">        <div class="modal-content">                <!--<img class="gif-width1" src="<?php echo base_url("/themes/esms/assets/media/logos/popupb.png"); ?> ">-->            <div class="modal-header">                <h5 class="modal-title" id="exampleModalLongTitle"><?php echo $new_message['new_messages'][0]['caption']; ?></h5>                <!--<button type="button" class="close" data-dismiss="modal" aria-label="Close">                </button>-->            </div>            <div class="modal-body">                <div class="notify-message">                    <img class="pin-img" src="<?php echo base_url("/themes/esms/assets/media/logos/pin.png"); ?> ">                    <img class="pin-img pin-img-right" src="<?php echo base_url("/themes/esms/assets/media/logos/pin.png"); ?> ">                    <?php //print_r($new_message); ?>                    <p><?php                        if ($new_message['new_messages'][0]['is_source_message'] == "1") {                            echo $new_message['new_messages'][0]['messageboard_message'];                        } else {                            echo $new_message['new_messages'][0]['message'];                        }                        ?></p>                    <input type="hidden" id="messageboard_id" value="<?php echo $new_message['new_messages'][0]['messageboard_id']; ?>">                    <div id="response_msg_div" class="col-md-12 hide">                        <label>Reason<span class="req">*</span></label>                        <textarea class="form-control" name="response_message" id="response_message" placeholder="Enter Reason" ng-model="addressVal"></textarea>                        <span class="form-text text-muted response_message-error error-span"></span>                    </div>                    <img class="pin-img" src="<?php echo base_url("/themes/esms/assets/media/logos/pin.png"); ?> ">                    <img class="pin-img pin-img-right" src="<?php echo base_url("/themes/esms/assets/media/logos/pin.png"); ?> ">                </div>                <div class="txt-align-right"><label class="">Posted by: <?php echo $new_message['new_messages'][0]['sender_name']; ?></label></div>            </div>            <div class="modal-footer">                <?php                if ($new_message['new_messages'][0]['is_source_message'] == "1") {                    if ($new_message['new_messages'][0]['has_confirmation'] == "1") {                        ?>                        <button type="button" id="reject_message" class="btn btn-danger" data-id="<?php echo $new_message['new_messages'][0]['id']; ?>">Reject</button>                        <button type="button" id="accept_message" class="btn btn-success" data-id="<?php echo $new_message['new_messages'][0]['id']; ?>">Accept</button>                        <?php                    } else {                        ?>                        <button type="button" id="viewed_message" class="btn btn-primary" data-id="<?php echo $new_message['new_messages'][0]['id']; ?>">Close</button>                        <?php                    }                } else {                    ?>                    <button type="button" id="viewed_reply_message" class="btn btn-primary" data-id="<?php echo $new_message['new_messages'][0]['id']; ?>">Close</button>                    <?php                }                ?>            </div>        </div>    </div>    <div class="gif-img" >        <img class="gif-width" src="<?php echo base_url("/themes/esms/assets/media/logos/msggif.gif"); ?> ">    </div></div><script>    $(document).ready(function () {        var is_new_message = $("#is_new_message").val();        if (is_new_message == "1") {            //$(".gif-img").css("display", "block");            //$("#kt_modal_6").css("display", "none");            $("#kt_modal_6").modal({backdrop: 'static', keyboard: false});            setTimeout(function () {                $(".gif-img").css("display", "none");                $(".modal-dialog").css("display", "");            }, 2000);        }        $(document).on('click', "#accept_message", function () {            //var message_received_status_id = $(this).attr("data-id");            $("#accept_message").addClass('kt-spinner kt-spinner--right kt-spinner--sm kt-spinner--light').attr('disabled', true);            var chat_message_id = $(this).attr("data-id");            var messageboard_id = $("#messageboard_id").val();            //var dataString = "message_received_status_id=" + message_received_status_id + "&status=accepted&messageboard_id=" + messageboard_id;            var dataString = "chat_message_id=" + chat_message_id + "&status=accepted&messageboard_id=" + messageboard_id;            $.ajax({                method: "POST",                url: base_url + "messageboard/update_notification_status",                data: dataString,                error: function (data) {                    console.log(data);                },                success: function (data) {                    console.log(data);                    $("#kt_modal_6").modal("hide");                }            });        });        $(document).on('click', "#reject_message", function () {            $("#response_msg_div").removeClass("hide");            var response_message = $("#response_message").val();            if (response_message == "") {                $("#response_message").addClass("is-invalid");                $(".response_message-error").html("Please mention the reason");            } else {                $("#reject_message").addClass('kt-spinner kt-spinner--right kt-spinner--sm kt-spinner--light').attr('disabled', true);                $("#response_message").removeClass("is-invalid");                $(".response_message-error").html("");                //var message_received_status_id = $(this).attr("data-id");                var chat_message_id = $(this).attr("data-id");                var messageboard_id = $("#messageboard_id").val();                //var dataString = "message_received_status_id=" + message_received_status_id + "&status=rejected&messageboard_id=" + messageboard_id + "&response_message=" + response_message;                var dataString = "chat_message_id=" + chat_message_id + "&status=rejected&messageboard_id=" + messageboard_id + "&response_message=" + response_message;                $.ajax({                    method: "POST",                    url: base_url + "messageboard/update_notification_status",                    data: dataString,                    error: function (data) {                        console.log(data);                    },                    success: function (data) {                        //console.log(data);                        $("#kt_modal_6").modal("hide");                    }                });            }        });        $(document).on('click', "#viewed_message", function () {            $("#viewed_message").addClass('kt-spinner kt-spinner--right kt-spinner--sm kt-spinner--light').attr('disabled', true);            //var message_received_status_id = $(this).attr("data-id");            var chat_message_id = $(this).attr("data-id");            var messageboard_id = $("#messageboard_id").val();            // var dataString = "message_received_status_id=" + message_received_status_id + "&messageboard_id=" + messageboard_id;            var dataString = "chat_message_id=" + chat_message_id + "&status=viewed&messageboard_id=" + messageboard_id;            $.ajax({                method: "POST",                url: base_url + "messageboard/update_notification_status",                data: dataString,                error: function (data) {                    console.log(data);                },                success: function (data) {                    //console.log(data);                    $("#kt_modal_6").modal("hide");                }            });        });        $(document).on('click', "#viewed_reply_message", function () {            $("#viewed_reply_message").addClass('kt-spinner kt-spinner--right kt-spinner--sm kt-spinner--light').attr('disabled', true);            //var message_received_status_id = $(this).attr("data-id");            var chat_message_id = $(this).attr("data-id");            var messageboard_id = $("#messageboard_id").val();            // var dataString = "message_received_status_id=" + message_received_status_id + "&messageboard_id=" + messageboard_id;            var dataString = "chat_message_id=" + chat_message_id + "&status=viewed_reply&messageboard_id=" + messageboard_id;            $.ajax({                method: "POST",                url: base_url + "messageboard/update_notification_status",                data: dataString,                error: function (data) {                    console.log(data);                },                success: function (data) {                    //console.log(data);                    $("#kt_modal_6").modal("hide");                }            });        });    });</script>